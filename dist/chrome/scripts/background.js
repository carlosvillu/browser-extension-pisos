!function(){"use strict";var e={279:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.RentalDataCacheService=void 0,t.RentalDataCacheService=class{logger;defaultTTL=6e5;CACHE_PREFIX="rental_cache_";constructor(e){this.logger=e}async get(e){try{const t=this.CACHE_PREFIX+e,r=(await chrome.storage.session.get(t))[t];return r?Date.now()-r.timestamp>r.ttl?(await chrome.storage.session.remove(t),this.logger.log(`Cache entry expired for key: ${e}`),null):(this.logger.log(`Cache hit for key: ${e}`),r.data):null}catch(t){return this.logger.error(`Error getting cache for key ${e}:`,t),null}}async set(e,t,r=this.defaultTTL){try{const s=this.CACHE_PREFIX+e,o={data:t,timestamp:Date.now(),ttl:r};await chrome.storage.session.set({[s]:o}),this.logger.log(`Cached data for key: ${e} (TTL: ${r}ms)`)}catch(t){this.logger.error(`Error setting cache for key ${e}:`,t)}}async clear(){try{const e=await chrome.storage.session.get(null),t=Object.keys(e).filter((e=>e.startsWith(this.CACHE_PREFIX)));t.length>0&&await chrome.storage.session.remove(t),this.logger.log("Cache cleared")}catch(e){this.logger.error("Error clearing cache:",e)}}async cleanup(){try{const e=await chrome.storage.session.get(null),t=Date.now(),r=[];for(const[s,o]of Object.entries(e))if(s.startsWith(this.CACHE_PREFIX)){const e=o;t-e.timestamp>e.ttl&&r.push(s)}r.length>0&&(await chrome.storage.session.remove(r),this.logger.log(`Cleaned up ${r.length} expired cache entries`))}catch(e){this.logger.error("Error during cache cleanup:",e)}}}},530:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.Logger=void 0,t.Logger=class{context;constructor(e){this.context=e}log(e,t){const r=`[${(new Date).toISOString()}][${this.context}]`;t?console.log(`${r} ${e}`,t):console.log(`${r} ${e}`)}error(e,t){const r=`[${(new Date).toISOString()}][${this.context}][ERROR]`;t?console.error(`${r} ${e}`,t):console.error(`${r} ${e}`)}}}},t={};function r(s){var o=t[s];if(void 0!==o)return o.exports;var c=t[s]={exports:{}};return e[s](c,c.exports,r),c.exports}!function(){const e=r(279),t=new(r(530).Logger)("Background"),s=new e.RentalDataCacheService(t);chrome.runtime.onInstalled.addListener((()=>{console.log("Extension installed")})),chrome.runtime.onMessage.addListener(((e,t,r)=>"CACHE_GET"===e.type?(s.get(e.key).then((e=>r({success:!0,data:e}))).catch((e=>r({success:!1,error:e.message}))),!0):"CACHE_SET"===e.type?(s.set(e.key,e.data,e.ttl).then((()=>r({success:!0}))).catch((e=>r({success:!1,error:e.message}))),!0):"CACHE_CLEAR"===e.type?(s.clear().then((()=>r({success:!0}))).catch((e=>r({success:!1,error:e.message}))),!0):"CACHE_CLEANUP"===e.type?(s.cleanup().then((()=>r({success:!0}))).catch((e=>r({success:!1,error:e.message}))),!0):void 0))}()}();